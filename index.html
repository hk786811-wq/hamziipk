<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HAMZI-PAK-FIND</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">

<!-- Icons -->
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

<style>
:root{
 --grad:linear-gradient(90deg,#8E2DE2,#4A00E0,#ec4899,#f59e0b);
}
body{
 font-family:Poppins,sans-serif;
 background:#0f0f12;
 color:#fff;
}
.shiny{
 background:var(--grad);
 background-size:400%;
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
 animation:shine 8s linear infinite;
}
@keyframes shine{
 0%{background-position:0%}
 100%{background-position:400%}
}
.btn-grad{
 background:var(--grad);
 background-size:200%;
 transition:.3s;
}
.btn-grad:hover{background-position:right}
#popupOverlay{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.85);
 display:none;
 justify-content:center;
 align-items:flex-end;
 z-index:50;
}
#popupBox{
 background:#1f1f1f;
 width:100%;
 max-width:430px;
 border-radius:20px 20px 0 0;
 padding:20px;
 animation:up .35s ease;
 max-height:90vh;
 overflow:auto;
}
@keyframes up{
 from{transform:translateY(100%)}
 to{transform:translateY(0)}
}
.card{
 background:#2a2a2a;
 padding:12px;
 border-radius:14px;
 animation:fade .3s ease;
}
@keyframes fade{
 from{opacity:0;transform:translateY(6px)}
 to{opacity:1}
}
.card strong{color:#facc15}
.icon-btn{
 padding:10px;
 border-radius:12px;
 background:#374151;
 transition:.2s;
}
.icon-btn:hover{transform:scale(1.1)}
</style>
</head>

<body class="min-h-screen p-4 flex items-center justify-center">

<div class="w-full max-w-md space-y-6">
<h1 class="text-4xl font-extrabold text-center shiny">
HAMZI-PAK-FIND
</h1>

<p class="text-center text-gray-400 text-sm">
Phone (10–11 digits) or CNIC (13 digits)<br>
<b>No 0 / No +92</b>
</p>

<input id="input"
class="w-full p-4 rounded-xl bg-gray-800 border border-gray-700"
placeholder="3XXXXXXXX or CNIC">

<button onclick="searchData()"
class="w-full btn-grad py-4 rounded-xl font-bold text-lg">
Search
</button>

<div id="errorBox"
class="hidden bg-red-900/40 p-3 rounded-xl text-red-300 text-center"></div>

<p class="text-center text-xs text-gray-500 pt-4">
CREDIT : HAMZI
</p>
</div>

<!-- POPUP -->
<div id="popupOverlay">
<div id="popupBox">

<div class="flex justify-between items-center mb-3">
<h2 class="text-xl font-bold shiny">Results</h2>
<button onclick="closePopup()"><i data-feather="x"></i></button>
</div>

<div id="popupContent" class="space-y-4 text-sm"></div>

<div class="flex gap-3 mt-5">
<button onclick="downloadTxt()" class="flex-1 btn-grad py-3 rounded-xl font-bold">
Download TXT
</button>

<button id="copyBtn" onclick="copyAll()" class="icon-btn">
<i data-feather="copy"></i>
</button>
</div>

</div>
</div>

<script>
feather.replace();

const input = document.getElementById("input");
const errorBox = document.getElementById("errorBox");
const popupOverlay = document.getElementById("popupOverlay");
const popupContent = document.getElementById("popupContent");
const copyBtn = document.getElementById("copyBtn");

let lastRecords = [];

async function searchData(){
 let val = input.value.trim();

 if(!val) return showError("Input required");
 if(val.startsWith("0") || val.startsWith("+"))
   return showError("0 ya +92 mat lagao");

 if(!/^[0-9]{10,11}$/.test(val) && !/^[0-9]{13}$/.test(val))
   return showError("Invalid phone or CNIC");

 errorBox.classList.add("hidden");

 const apiURL = `https://fam-official.serv00.net/api/famdatabase.php?number=${val}`;
 const api = "https://corsproxy.io/?" + encodeURIComponent(apiURL);

 try{
   const res = await fetch(api);
   if(!res.ok) return showError("API blocked / server issue");

   const text = await res.text();
   let json;

   try{ json = JSON.parse(text); }
   catch{ return showError("Invalid API response"); }

   if(!json.success || !json.data || !json.data.records || !json.data.records.length)
     return showError("No data found");

   lastRecords = json.data.records;
   showPopup(lastRecords);

 }catch{
   showError("Network / CORS error");
 }
}

function showPopup(records){
 popupContent.innerHTML="";
 records.forEach((r,i)=>{
   popupContent.innerHTML+=`
   <div class="card">
     <div><strong>#${i+1}</strong></div>
     <div><strong>NAME:</strong> ${r.full_name || "N/A"}</div>
     <div><strong>PHONE:</strong> ${r.phone || "N/A"}</div>
     <div><strong>CNIC:</strong> ${r.cnic || "N/A"}</div>
     <div><strong>ADDRESS:</strong> ${r.address || "N/A"}</div>
   </div>`;
 });
 popupOverlay.style.display="flex";
 feather.replace();
}

function closePopup(){
 popupOverlay.style.display="none";
}

// COPY WITH ✔
function copyAll(){
 if(!lastRecords.length) return;

 let text="";
 lastRecords.forEach((r,i)=>{
   text+=`#${i+1}\n`;
   text+=`NAME : ${r.full_name}\n`;
   text+=`PHONE : ${r.phone}\n`;
   text+=`CNIC : ${r.cnic}\n`;
   text+=`ADDRESS : ${r.address}\n\n`;
 });
 text+="CREDIT : HAMZI";

 navigator.clipboard.writeText(text);

 copyBtn.innerHTML='<i data-feather="check"></i>';
 feather.replace();

 setTimeout(()=>{
   copyBtn.innerHTML='<i data-feather="copy"></i>';
   feather.replace();
 },2000);
}

// DOWNLOAD TXT
function downloadTxt(){
 if(!lastRecords.length) return;

 let text="";
 lastRecords.forEach((r,i)=>{
   text+=`#${i+1}\n`;
   text+=`NAME : ${r.full_name}\n`;
   text+=`PHONE : ${r.phone}\n`;
   text+=`CNIC : ${r.cnic}\n`;
   text+=`ADDRESS : ${r.address}\n\n`;
 });
 text+="CREDIT : HAMZI";

 const blob=new Blob([text],{type:"text/plain"});
 const a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="results.txt";
 a.click();
}

function showError(msg){
 errorBox.textContent=msg;
 errorBox.classList.remove("hidden");
}

popupOverlay.onclick=e=>{
 if(e.target===popupOverlay) closePopup();
}
</script>

</body>
</html>