<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HamzaEditz 2.0 - Number Search</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

<style>
body {
    font-family: 'Poppins', sans-serif;
    background:#0f0f12;
    color:#f0f0f0;
}
.btn-gradient {
    background: linear-gradient(90deg,#8E2DE2,#4A00E0);
}
.result-row strong { color:#facc15; }

/* Popup */
#popupOverlay {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.8);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:50;
}
#popupBox {
    background:#1f1f1f;
    width:92%;
    max-width:420px;
    border-radius:16px;
    padding:20px;
    animation: pop 0.25s ease;
}
@keyframes pop {
    from{transform:scale(0.9);opacity:0}
    to{transform:scale(1);opacity:1}
}
</style>
</head>

<body class="min-h-screen p-4">

<div class="max-w-xl mx-auto space-y-6">

<h1 class="text-3xl font-extrabold text-center bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500">
HamzaEditz 2.0
</h1>

<div class="flex gap-2">
<input id="phoneInput" type="tel"
class="flex-1 p-4 rounded-lg bg-gray-800 border border-gray-700"
placeholder="Enter number e.g. 0306xxxxxxx">

<button id="searchBtn"
class="btn-gradient px-6 rounded-lg font-bold">
Search
</button>
</div>

<div id="errorBox" class="hidden bg-red-900/40 p-3 rounded-lg text-red-300 text-center"></div>

</div>

<!-- POPUP -->
<div id="popupOverlay">
<div id="popupBox">
<div class="flex justify-between items-center mb-4">
<h2 class="text-xl font-bold text-purple-400">Search Result</h2>
<button onclick="closePopup()" class="text-gray-400 hover:text-white">
<i data-feather="x"></i>
</button>
</div>

<div id="popupContent" class="space-y-2 text-sm"></div>

<button onclick="closePopup()"
class="mt-5 w-full btn-gradient py-3 rounded-lg font-bold">
Close
</button>
</div>
</div>

<script>
feather.replace();

const phoneInput = document.getElementById("phoneInput");
const searchBtn = document.getElementById("searchBtn");
const errorBox = document.getElementById("errorBox");
const popupOverlay = document.getElementById("popupOverlay");
const popupContent = document.getElementById("popupContent");

searchBtn.onclick = searchNumber;

async function searchNumber(){
    let num = phoneInput.value.trim();
    if(!num){
        showError("Please enter a phone number");
        return;
    }

    if(num.startsWith("0")) num = num.slice(1);
    if(num.startsWith("+")) num = num.replace("+","");

    errorBox.classList.add("hidden");

    const api = `https://fam-official.serv00.net/api/famdatabase.php?number=${num}`;

    try{
        const res = await fetch(api);
        const json = await res.json();

        if(!json.success || !json.data.records.length){
            showError("No data found");
            return;
        }

        showPopup(json.data.records[0]);

    }catch(e){
        showError("API error or blocked");
    }
}

function showPopup(data){
    popupContent.innerHTML = "";
    for(const key in data){
        popupContent.innerHTML += `
        <div class="result-row">
            <strong>${key.replace("_"," ").toUpperCase()}:</strong>
            <span>${data[key]}</span>
        </div>`;
    }
    popupOverlay.style.display="flex";
    feather.replace();
}

function closePopup(){
    popupOverlay.style.display="none";
}

function showError(msg){
    errorBox.textContent = msg;
    errorBox.classList.remove("hidden");
}

// Close popup when clicking outside
popupOverlay.addEventListener("click", e=>{
    if(e.target === popupOverlay) closePopup();
});
</script>

</body>
</html>
